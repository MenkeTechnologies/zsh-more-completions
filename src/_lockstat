#compdef lockstat

local arguments

arguments=(
  '-V[print the corresponding D program]'
  '-C[watch contention events \[on by default\]]'
  '-E[watch error events \[off by default\]]'
  '-H[watch hold events \[off by default\]]'
  '-I[watch interrupt events \[off by default\]]'
  '-A[watch all lock events \[equivalent to -CH\]]'
  '-e[only watch the specified events (shown below);]'
  '-i[interrupt rate for -I \[default: 97 Hz\]]'
  '-b[basic statistics (lock, caller, event count)]'
  '-t[timing for all events \[default\]]'
  '-h[histograms for event times]'
  '-s[stack traces <depth> deep]'
  '-x[val\] enable or modify DTrace options]'
  '-n[maximum number of data records \[default: 10000\]]'
  '-l[size\] only watch <lock>, which can be specified as a]'
  '-f[size\] only watch events generated by <func>]'
  '-d[only watch events longer than <duration>]'
  '-T[trace (rather than sample) events]'
  '-k[coalesce PCs within functions]'
  '-g[show total events generated by function]'
  '-w[wherever: dont distinguish events by caller]'
  '-W[whichever: dont distinguish events by lock]'
  '-R[display rates rather than counts]'
  '-p[parsable output format (awk(1)-friendly)]'
  '-P[sort lock data by (count * avg_time) product]'
  '-D[only display top <n> events of each type]'
  '-o[send output to <filename>]'
  '*:filename:_files'
)

_arguments -s $arguments
