#compdef zdb

local arguments

arguments=(
  '-b[statistics]'
  '-c[all metadata (twice for all data) blocks]'
  '-C[(or cachefile if alone)]'
  '-d[(s)]'
  '-D[statistics]'
  '-E[and display block from an embedded block pointer]'
  '-h[history]'
  '-i[logs]'
  '-l[label contents]'
  '-k[the checkpointed state of the pool]'
  '-L[leak tracking (do not load spacemaps)]'
  '-m[]'
  '-M[groups]'
  '-O[object lookups by path]'
  '-R[and display block from a device]'
  '-s[stats on zdbs I/O]'
  '-S[dedup to measure effect]'
  '-v[(applies to all others)]'
  '-A[assertions (-A), enable panic recovery (-AA) or both (-AAA)]'
  '-e[is exported/destroyed/has altroot/not in a cachefile]'
  '-F[automatic rewind within safe range of transaction groups]'
  '-G[zfs_dbgmsg buffer before exiting]'
  '-I[of inflight I/Os> -- specify the maximum number of checksumming I/Os \[default is 200\]]'
  '-o[set global variable to an unsigned 32-bit integer value]:value:'
  {-p,--}'[one or more with -e to specify path to vdev dir]'
  '-P[numbers in parseable form]'
  '-q[t print label contents]'
  {-t,--}'[txg to use when searching for uberblocks]'
  '-u[]'
  {-U,--}'[alternate cachefile]'
  '-V[verbatim import]'
  {-x,--}'[all read blocks into specified directory]'
  '-X[extreme rewind (does not work with dataset)]'
  '*:filename:_files'
)

_arguments -s $arguments
