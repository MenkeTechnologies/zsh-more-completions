#compdef perfquery

local arguments

arguments=(
  {--extended,-x}'[show extended port counters]'
  {--xmtsl,-X}'[show Xmt SL port counters]'
  {--rcvsl,-S}'[show Rcv SL port counters]'
  {--xmtdisc,-D}'[show Xmt Discard Details]'
  {--rcverr,-E}'[show Rcv Error Details]'
  '--extended[_speeds, -T   show port extended speeds counters]'
  '--oprcvcounters[show Rcv Counters per Op code]'
  '--flowctlcounters[show flow control counters]'
  '--vloppackets[show packets received per Op code per VL]'
  '--vlopdata[show data received per Op code per VL]'
  '--vlxmitflowctlerrors[show flow control update errors per VL]'
  '--vlxmitcounters[show ticks waiting to transmit counters per VL]'
  '--swportvlcong[show sw port VL congestion]'
  '--rcvcc[show Rcv congestion control counters]'
  '--slrcvfecn[show SL Rcv FECN counters]'
  '--slrcvbecn[show SL Rcv BECN counters]'
  '--xmitcc[show Xmit congestion control counters]'
  '--vlxmittimecc[show VL Xmit Time congestion control counters]'
  {--smplctl,-c}'[show samples control]'
  '--all[_ports, -a         show aggregated counters]'
  '--loop[_ports, -l        iterate through each port]'
  '--reset[_after_read, -r  reset counters after read]'
  '--Reset[_only, -R        only reset counters]'
  {--config,-z}'[use config file, default: /etc/infiniband-diags/ibdiag.conf]'
  {--Ca,-C}'[ca name to use]'
  {--Port,-P}'[ca port number to use]'
  {--Lid,-L}'[use LID address argument]'
  {--Guid,-G}'[use GUID address argument]'
  {--timeout,-t}'[timeout in ms]'
  '--sm[_port, -s <lid>     SM port lid]'
  '--m[_key, -y <key>       M_Key to use in request]'
  {--errors,-e}'[show send and receive errors]'
  {--verbose,-v}'[increase verbosity level]'
  {--debug,-d}'[raise debug level]'
  {--help,-h}'[help message]'
  {--version,-V}'[show version]'
  '*:filename:_files'
)

_arguments -s $arguments
